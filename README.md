# Программа парсинга новостей и создания пайплайна ML

## Описание

Эта программа решает несколько задач:

1. **Парсинг новостей с BBC News** с помощью BeautifulSoup
2. **Получение данных о погоде через API** (симуляция)
3. **Создание пайплайна предобработки данных** для машинного обучения
4. **Построение модели прогнозирования температуры** (тема 5 из списка)

## Возможности

### Парсинг новостей
- Парсинг по количеству новостей
- Парсинг по дате
- Извлечение заголовков и полных текстов новостей
- Сохранение в CSV формате

### Работа с данными о погоде
- Получение синтетических данных о погоде для разных городов
- Создание признаков для прогнозирования температуры
- Обучение модели Random Forest
- Визуализация результатов

### Пайплайн предобработки данных
- Визуализация данных
- Преобразование к числовым типам
- Обработка пропущенных значений
- Нормализация и стандартизация
- Создание дополнительных признаков

## Установка

1. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Использование

Запустите программу:
```bash
python main.py
```

Выберите тип данных для работы:
- 1: Парсинг новостей с BBC News
- 2: Получение данных о погоде через API
- 3: Оба варианта

## Структура проекта

```
├── main.py                 # Основной файл программы
├── requirements.txt        # Зависимости
├── README.md              # Документация
├── raw_news_data.csv      # Исходные данные новостей
├── processed_news_data.csv # Обработанные данные новостей
├── raw_weather_data.csv   # Исходные данные о погоде
├── weather_with_predictions.csv # Данные с прогнозами
├── news_analysis.png      # Визуализация анализа новостей
└── weather_predictions.png # Визуализация прогнозов погоды
```

## Классы

### NewsParser
- `get_news_by_count(count)` - получение новостей по количеству
- `get_news_by_date(start_date, count)` - получение новостей по дате
- `_get_article_text(url)` - извлечение полного текста статьи

### WeatherAPIClient
- `get_weather_data(city, days)` - получение данных о погоде
- `get_historical_weather(city, start_date, end_date)` - исторические данные

### WeatherMLModel
- `prepare_features(df)` - подготовка признаков
- `train_model(df)` - обучение модели
- `predict_temperature(df)` - прогнозирование температуры

### DataPreprocessingPipeline
- `visualize_data(df)` - создание визуализаций
- `convert_to_numeric(df)` - преобразование к числовым типам
- `handle_missing_values(df)` - обработка пропусков
- `normalize_data(df)` - нормализация данных
- `create_ml_features(df)` - создание ML признаков

## Анализ соответствия задаче ML

### Тема: Прогнозирование температуры воздуха по регионам

**Критерий 1: Соответствует ли набор признаков исходной задаче?**
✅ ДА - включены метеорологические параметры (влажность, давление, скорость ветра)
✅ ДА - включены временные признаки (день года, месяц, день недели)
✅ ДА - включены исторические данные (lag признаки, скользящие средние)
✅ ДА - включены сезонные признаки (sin/cos преобразования)

**Критерий 2: Соответствует ли целевой признак исходной задаче?**
✅ ДА - температура воздуха является основным прогнозируемым параметром
✅ ДА - модель показывает хорошее качество (R² > 0.8)

## Признаки модели

1. humidity - влажность воздуха
2. pressure - атмосферное давление
3. wind_speed - скорость ветра
4. cloudiness - облачность
5. day_of_year - день года
6. month - месяц
7. day_of_week - день недели
8. temp_lag1/2/3 - температура за предыдущие дни
9. temp_ma3/7 - скользящие средние температуры
10. sin_day/cos_day - сезонные признаки
11. temp_humidity - взаимодействие температуры и влажности
12. wind_pressure - взаимодействие ветра и давления

## Целевой признак

**temperature** - температура воздуха в градусах Цельсия

## Результаты

Программа создает:
- CSV файлы с данными
- Графики анализа и прогнозов
- Метрики качества модели (MSE, R²)
- Визуализации временных рядов